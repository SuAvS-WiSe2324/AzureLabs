<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>LAB_AK_03-set-up-the-development-environment</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}

kbd {
  display: inline-block;
  padding: 3px 5px;
  font-size: 11px;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb
}

* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>


</head>

<body>

<blockquote>
<p>title: &#39;Lab 03: Setup the Development Environment&#39;
    module: &#39;Module 2: Devices and Device Communication&#39;</p>
</blockquote>

<h1 id="toc_0">Set up the Development Environment</h1>

<h2 id="toc_1">Lab Scenario</h2>

<p>As one of the developers at Contoso, you know that setting up your development environment is an important step before starting to build your Azure IoT solution. You also know that Microsoft and other companies provide a number of tools that can be used to develop and support your IoT solutions, and that some decisions should be made about which tools your team will use.</p>

<p>You decide to prepare a development environment that the team can use to work on your IoT solution. The environment will need to support your work in Azure and on your local PC. After some discussion, your team has made the following high-level decisions about the dev environment:</p>

<ul>
<li>Operating System: Windows 10 will be used as the OS. Windows is used by most of your team, so it was a logical choice. You make a note to the team that Azure services support other operating systems (such as Mac OS and Linux), and that Microsoft provides supporting documentation for the members of your team who choose one of these alternatives.</li>
<li>General Coding Tools: Visual Studio Code and Azure CLI will be used as the primary coding tools. Both of these tools support extensions for IoT that leverage the Azure IoT SDKs.</li>
<li>IoT Edge Tools: Docker Desktop Community and Python will be used to support custom IoT Edge module development (along with Visual Studio Code).</li>
</ul>

<p>In support of these decisions, you will be setting up the following environment:</p>

<ul>
<li><p>Windows 10 64-bit: Pro, Enterprise, or Education (Build 15063 or later). Including</p>

<ul>
<li>4GB – 8GB system RAM (higher the better for Docker)</li>
<li>Hyper-V and Containers features of Windows must be enabled.</li>
<li>BIOS-level hardware virtualization support must be enabled in the BIOS settings.</li>
</ul>

<blockquote>
<p><strong>Note</strong>: When setting up the development environment on a virtual machine, the VM environment must support nested virtualization - <a href="https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/user-guide/nested-virtualization">nested virtualization</a></p>
</blockquote></li>
<li><p>Azure CLI (current/latest)</p></li>
<li><p>.NET Core 3.1.200 (or later) SDK</p></li>
<li><p>VS Code (latest)</p></li>
<li><p>Python 3.9</p></li>
<li><p>Docker Desktop Community 2.1.0.5 (or later) set to Linux Containers</p></li>
<li><p>IoT Extensions for VS Code and Azure CLI</p></li>
<li><p>node.js (latest)</p></li>
</ul>

<blockquote>
<p><strong>IMPORTANT</strong>: A virtual machine has been created for this course that provides a majority of the tools specified above. The instructions below support using the prepared VM or setting up the development environment locally using your PC.</p>
</blockquote>

<h2 id="toc_2">In This Lab</h2>

<p>In this lab, you will configure your development environment. The lab includes the following exercises:</p>

<ul>
<li><p>For students using the LOD virtual machine environment:</p>

<ul>
<li>Install Dev Tool Extensions in the Virtual Machine Environment</li>
</ul></li>
<li><p>For students who need to configure their local PC as a development environment:</p>

<ul>
<li>Install Developer Tools and Products on the Local PC</li>
<li>Install Dev Tool Extensions on the Local PC</li>
<li>Set Up Course Lab Files and Alternative Tools on the Local PC</li>
<li>Register Resource Providers on the Local PC</li>
</ul></li>
</ul>

<h2 id="toc_3">Lab Instructions</h2>

<blockquote>
<p><strong>IMPORTANT</strong>: For students who are using the hosted virtual machine environment to complete the labs in this course, Exercise 1 is the only Exercise that you need to complete. All of the other Exercises in this lab are for students who are setting up a dev environment on their local PC. If you will be setting up a dev environment on your local PC, skip to ahead to Exercise 2 and then complete all of the remaining Exercises.</p>
</blockquote>

<h3 id="toc_4">Exercise 1: Install Tool Extensions in the Virtual Machine Environment</h3>

<p>The Visual Studio Code and Azure CLI tools (already installed on the virtual machine) both support an Azure IoT extension that helps developers to create their solutions more efficiently. These extensions leverage the Azure IoT SDKs and will often reduce development time while ensuring security provisions. You will also be adding a C# extension for Visual Studio Code.</p>

<h4 id="toc_5">Task 1: Install Visual Studio Code Extensions on the Virtual Machine</h4>

<ol>
<li><p>Open Visual Studio Code.</p></li>
<li><p>On the left side of the Visual Studio Code window, click <strong>Extensions</strong>.</p>

<p>You can hover the mouse pointer over the buttons to display the button titles. The Extensions button is sixth from the top.</p></li>
<li><p>In the Visual Studio Code Extension manager, search for and then install the following Extensions:</p>

<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=vsciot-vscode.azure-iot-tools">Azure IoT Tools</a> (<code>vsciot-vscode.azure-iot-tools</code>) by Microsoft</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.csharp">C# for Visual Studio Code</a> (<code>ms-vscode.csharp</code>) by Microsoft</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-node-azure-pack">Azure Tools for Visual Studio Code</a> (ms-vscode.vscode-node-azure-pack) by Microsoft</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=vsciot-vscode.vscode-dtdl">DTDL Editor for Visual Studio Code</a> (vsciot-vscode.vscode-dtdl) by Microsoft</li>
</ul></li>
<li><p>Close Visual Studio Code.</p></li>
</ol>

<h4 id="toc_6">Task 2: Install Azure CLI Extension - virtual machine environment</h4>

<ol>
<li><p>Open a new command-line / terminal window, to install the Azure IoT CLI extensions.</p>

<p>For example, you can use the Windows <strong>Command Prompt</strong> command-line application.</p></li>
<li><p>At the command prompt, to install the Azure CLI extension for IoT, enter the following command:</p>

<div><pre><code class="language-bash">az extension add --name azure-iot</code></pre></div></li>
<li><p>At the command prompt, to install the Azure CLI extension for Time Series Insights, enter the following command:</p>

<div><pre><code class="language-bash">az extension add --name timeseriesinsights</code></pre></div></li>
</ol>

<h4 id="toc_7">Task 3: Install Azure CLI Extension - cloud environment</h4>

<p>Many of the labs will require the use of the Azure CLI IoT extensions via the Azure Cloud Shell. The following steps ensure the extension is installed and running the latest version.</p>

<ol>
<li><p>Open Web browser window on your virtual machine, and then navigate to the Azure cloud shell at the following address:</p>

<p>+++https://shell.azure.com/+++</p></li>
<li><p>When prompted, login with the Azure subscription you are using for this course.</p></li>
<li><p>If you are prompted about setting up storage for Cloud Shell, accept the defaults.</p></li>
<li><p>Verify that the Cloud Shell is using <strong>Bash</strong>.</p>

<p>The dropdown in the top-left corner of the Azure Cloud Shell page is used to select the environment. Verify that the selected dropdown value is <strong>Bash</strong>.</p></li>
<li><p>At the command prompt, to install the Azure CLI extension for IoT, enter the following command:</p>

<div><pre><code class="language-bash">az extension add --name azure-iot</code></pre></div>

<p><strong>Note</strong>: If the extension is already installed, you can ensure you are running the latest version by entering the following command:</p>

<div><pre><code class="language-bash">az extension update --name azure-iot</code></pre></div></li>
<li><p>At the command prompt, to install the Azure CLI extension for Time Series Insights, enter the following command:</p>

<div><pre><code class="language-bash">az extension add --name timeseriesinsights</code></pre></div></li>
</ol>

<h4 id="toc_8">Task 4: Verify the Virtual Machine environment</h4>

<p>You should verify that the development environment has been set up successfully. Once this is complete, you will be ready to start building your IoT solutions.</p>

<ol>
<li><p>Open a new command-line / terminal window.</p></li>
<li><p>Validate the <strong>Azure CLI</strong> installation by running the following command that will output the version information for the currently installed version of the Azure CLI.</p>

<div><pre><code class="language-cmd/sh">az --version</code></pre></div>

<p>The <code>az --version</code> command will output the version information for Azure CLI that you have installed (the <code>azure-cli</code> version number). This command also outputs the version number for all the Azure CLI modules installed, including the IoT extension. You should see output similar to the following:</p>

<div><pre><code class="language-cmd/sh">azure-cli                           2.21.0

core                                2.21.0
telemetry                            1.0.6

Extensions:
azure-iot                          0.10.10
timeseriesinsights                   0.2.1</code></pre></div></li>
<li><p>Validate the <strong>.NET Core 3.x SDK</strong> installation by running the following command that will output the version number for the currently installed version of the .NET Core SDK.</p>

<div><pre><code class="language-cmd/sh">dotnet --version</code></pre></div>

<p>The <code>dotnet --version</code> command will output the version of the .NET Core SDK that is currently installed.</p></li>
<li><p>Verify that .NET Core 3.1 or higher is installed.</p></li>
</ol>

<blockquote>
<p><strong>NOTE</strong>: If you are using the LOD virtual machine environment to complete the labs in this course, your dev environment is configured and you are ready to move on to the next lab.</p>
</blockquote>

<h3 id="toc_9">Exercise 2: Install Developer Tools and Products on the local PC</h3>

<blockquote>
<p><strong>IMPORTANT</strong>: Exercise 2 and all of the remaining Exercises in this lab are for students who are <strong>NOT</strong> using the LOD virtual machine that was created for this course. Students who need to configure their local PC as their dev environment can use Exercises 2-5 to help them install tools and configure the dev environment on their local PC.</p>
</blockquote>

<h4 id="toc_10">Task 1: Install .NET Core on your local PC</h4>

<p>.NET Core is a cross-platform version of .NET for building websites, services, and console apps.</p>

<ol>
<li><p>To open the .NET Core download page, open a new browser tab, and then navigate to the following page:</p>

<div><pre><code class="language-none">https://dotnet.microsoft.com/download</code></pre></div></li>
<li><p>On the .NET download page, under .NET Core, click <strong>Download .NET Core SDK</strong>.</p>

<p>The .NET Core SDK is used to build .NET Core apps. You will be using it to build/edit code files during the labs in this course.</p></li>
<li><p>On the popup menu, click <strong>Run</strong>, and then follow the on-screen instructions to complete the installation.</p>

<p>The installation should take less than a minute to complete. The following components will be installed:</p>

<ul>
<li>.NET Core SDK 3.1.100 or later</li>
<li>.NET Core Runtime 3.1.100 or later</li>
<li>ASP.NET Core Runtime 3.1.100 or later</li>
<li>.NET Core Windows Desktop Runtime 3.1.0 or later</li>
</ul>

<p>The following resources are available for further information:</p>

<ul>
<li><a href="https://aka.ms/dotnet-docs">.NET Core Documentation</a></li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/core/install/dependencies?tabs=netcore31&amp;pivots=os-windows">.NET Core dependencies and requirements</a></li>
<li><a href="https://aka.ms/dotnet-sdk-docs">SDK Documentation</a></li>
<li><a href="https://aka.ms/netcore3releasenotes">Release Notes</a></li>
<li><a href="https://aka.ms/dotnet-tutorials">Tutorials</a></li>
</ul></li>
</ol>

<h4 id="toc_11">Task 2: Install Visual Studio Code on your local PC</h4>

<p>Visual Studio Code is a lightweight but powerful source code editor which runs on your desktop and is available for Windows, macOS and Linux. It comes with built-in support for JavaScript, TypeScript and Node.js and has a rich ecosystem of extensions for other languages (such as C++, C#, Java, Python, PHP, Go) and run times (such as .NET and Unity).</p>

<ol>
<li><p>To open the Visual Studio Code download page, open a new browser tab, and then navigate to the following page:</p>

<div><pre><code class="language-none">https://code.visualstudio.com/Download</code></pre></div>

<p>Instructions for installing Visual Studio Code on Mac OS X and Linux can be found on the Visual Studio Code set up guide <a href="https://code.visualstudio.com/docs/setup/setup-overview">here</a>. This page also includes more detailed instructions and tips for the Windows installation.</p></li>
<li><p>On the Download Visual Studio Code page, click <strong>Windows</strong>.</p>

<p>When you start the download, two things will happen: a popup dialog opens and some getting started guidance will be displayed.</p></li>
<li><p>On the popup dialog, to begin the set up process, click <strong>Run</strong> and then follow the on-screen instructions.</p>

<p>If you choose to Save the installer to your Downloads folder, you you can complete the installation by opening the folder and then double-clicking the VSCodeSetup executable.</p>

<p>By default, Visual Studio Code is installed in the &quot;C:\Program Files (x86)\Microsoft VS Code&quot; folder location (for a 64-bit machine). The set up process should only take about a minute.</p>

<blockquote>
<p><strong>Note</strong>:  .NET Framework 4.5 is required for Visual Studio Code when installing on Windows. If you are using Windows 7, please ensure <a href="https://www.microsoft.com/en-us/download/details.aspx?id=30653">.NET Framework 4.5</a> is installed.</p>
</blockquote>

<p>For detailed instructions on installing Visual Studio Code, see the Microsoft Visual Studio Code Installation Instruction guide here: <a href="https://code.visualstudio.com/Docs/editor/setup">https://code.visualstudio.com/Docs/editor/setup</a></p></li>
</ol>

<h4 id="toc_12">Task 3: Install Azure CLI on your local PC</h4>

<p>Azure CLI is a command-line tool that is designed to make scripting Azure-related tasks easier. It also enables you to flexibly query data, and it supports long-running operations as non-blocking processes.</p>

<ol>
<li><p>To open the Azure CLI tools download page, open a new browser tab, and then navigate to the following page:</p>

<div><pre><code class="language-none">https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest  </code></pre></div>

<p>You should be installing the latest version of the Azure CLI tools. The current version of Azure CLI (as of February 2022) is version 2.33, but be aware that new versions are released monthly, so the latest version is likely to have changed.</p></li>
<li><p>On the <strong>Install Azure CLI</strong> page, select the install option for your OS (such as <strong>Install on Windows</strong>), and then follow the on-screen instructions to install the Azure CLI tool.</p>

<p>You will be given detailed instructions for using the Azure CLI tools during the labs in this course, but if you want more information now, see <a href="https://docs.microsoft.com/en-us/cli/azure/get-started-with-azure-cli?view=azure-cli-latest">Get started with Azure CLI</a></p></li>
</ol>

<h4 id="toc_13">Task 4: Install Python 3.9 on your local PC</h4>

<p>You will be using Python 3.9 in support of IoT Edge and Docker.</p>

<ol>
<li><p>To open the Python.org downloads page, open a new browser tab, and then navigate to the following page:</p>

<div><pre><code class="language-none">https://www.python.org/downloads/</code></pre></div></li>
<li><p>On the Python download page, select the installer file that is appropriate for your Operating System.</p></li>
<li><p>When prompted, select the option to run the installer</p></li>
<li><p>On the Install Python  dialog, click <strong>Add Python 3.9 to PATH</strong>.</p></li>
<li><p>Click <strong>Install Now</strong>.</p></li>
<li><p>When the &quot;Setup was successful&quot; page appears, click <strong>Disable path length limit</strong>.</p></li>
<li><p>To finish the installation process, click <strong>Close</strong>.</p></li>
</ol>

<h4 id="toc_14">Task 5: Install Docker Desktop on your local PC</h4>

<p>You will be using Docker Desktop Community (latest stable version) during a lab that covers creating and deploying custom IoT Edge modules.</p>

<ol>
<li><p>To open the Docker Desktop for Windows download page, open a new browser tab, and then navigate to the following page:</p>

<div><pre><code class="language-none">https://docs.docker.com/docker-for-windows/install/ </code></pre></div>

<p>The left-side navigation menu provides access to installations for additional operating systems.</p></li>
<li><p>Verify that your PC meets the System Requirements.</p>

<p>You can use Windows Settings to open the Windows Features dialog, and use that to verify that Hyper-V and Containers are enabled.</p></li>
<li><p>Click <strong>Docker Desktop for Windows</strong>, and then follow the on-screen instructions to open and run the downloaded installation file.</p>

<p>It can take a little while for the installation dialog for Docker Desktop to appear.</p></li>
<li><p>When the Installation Succeeded message appears, click <strong>Close</strong>.</p>

<p>Docker Desktop does not start automatically after installation. To start Docker Desktop, search for Docker, and select Docker Desktop in the search results. When the whale icon in the status bar stays steady, Docker Desktop is up-and-running, and is accessible from any terminal window.</p></li>
</ol>

<h4 id="toc_15">Task 6 - Install node.js on your local PC</h4>

<p>Some sample web applications are run locally using node.js. The following steps ensure node.js is installed and running the latest version:</p>

<ol>
<li><p>To open the Node.js download page, open a new browser tab, and then navigate to the following page:</p>

<div><pre><code class="language-none">https://nodejs.org/en/#home-downloadhead</code></pre></div></li>
<li><p>Download the latest LTS (Long Term Support) version - 14.16.0 at the time of writing.</p></li>
<li><p>When prompted, select the option to run the installer.</p></li>
<li><p>Step through the installer:</p>

<ul>
<li><strong>End-User License Agreement</strong> - accept terms and click <strong>Next</strong>.</li>
<li><strong>Destination Folder</strong> - accept the default (or change if required) and click <strong>Next</strong>.</li>
<li><strong>Custom Setup</strong> - accept the defaults and click <strong>Next</strong>.</li>
<li><strong>Tools for Native Modules</strong> - check the <strong>Automatically install</strong> and click <strong>Next</strong>.</li>
<li><strong>Ready to install Node.js</strong> - click <strong>Install</strong>

<ul>
<li>On the UAC dialog, click <strong>Yes</strong>.</li>
</ul></li>
</ul></li>
<li><p>Wait for the install to complete and click <strong>Finish</strong>.</p></li>
<li><p>In the <strong>Install Additional Tools for Node.js</strong> command window, when prompted, press <strong>Enter</strong> to continue.</p></li>
<li><p>On the UAC dialog, click <strong>Yes</strong>.</p>

<p>Multiple packages will be downloaded and installed. This will take some time.</p></li>
<li><p>Once the installation has completed, open a <strong>new</strong> command shell and enter the following command:</p>

<div><pre><code class="language-powershell">node --version</code></pre></div>

<p>If node is installed successfully, the installed version will be displayed.</p></li>
</ol>

<h3 id="toc_16">Exercise 3: Install Tool Extensions for the local PC environment</h3>

<p>The Visual Studio Code and Azure CLI tools both support an Azure IoT extension that helps developers to create their solutions more efficiently. These extensions leverage the Azure IoT SDKs and will often reduce development time while ensuring security provisions. You will also be adding a C# extension for Visual Studio Code.</p>

<h4 id="toc_17">Task 1: Install Visual Studio Code Extensions on the local PC</h4>

<ol>
<li><p>Open Visual Studio Code.</p></li>
<li><p>On the left side of the Visual Studio Code window, click <strong>Extensions</strong>.</p>

<p>You can hover the mouse pointer over the buttons to display the button titles. The Extensions button is sixth from the top.</p></li>
<li><p>In the Visual Studio Code Extension manager, search for and then install the following Extensions:</p>

<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=vsciot-vscode.azure-iot-tools">Azure IoT Tools</a> (<code>vsciot-vscode.azure-iot-tools</code>) by Microsoft</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.csharp">C# for Visual Studio Code</a> (<code>ms-vscode.csharp</code>) by Microsoft</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-node-azure-pack">Azure Tools for Visual Studio Code</a> (ms-vscode.vscode-node-azure-pack) by Microsoft</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=vsciot-vscode.vscode-dtdl">DTDL Editor for Visual Studio Code</a> (vsciot-vscode.vscode-dtdl) by Microsoft</li>
</ul></li>
<li><p>Close Visual Studio Code.</p></li>
</ol>

<h4 id="toc_18">Task 2: Install Azure CLI Extension - local PC environment</h4>

<ol>
<li><p>Open a new command-line / terminal window, to install the Azure IoT CLI extensions.</p>

<p>For example, you can use the Windows <strong>Command Prompt</strong> command-line application.</p></li>
<li><p>At the command prompt, to install the Azure CLI extension for IoT, enter the following command:</p>

<div><pre><code class="language-bash">az extension add --name azure-iot</code></pre></div></li>
<li><p>At the command prompt, to install the Azure CLI extension for Time Series Insights, enter the following command:</p>

<div><pre><code class="language-bash">az extension add --name timeseriesinsights</code></pre></div></li>
</ol>

<h4 id="toc_19">Task 3: Install Azure CLI Extension - cloud environment</h4>

<p>Many of the labs will require the use of the Azure CLI IoT extensions via the Azure Cloud Shell. The following steps ensure the extension is installed and running the latest version.</p>

<ol>
<li><p>In your Web browser, navigate to the Azure cloud shell at the following address:</p>

<p><strong>Local PC</strong>: <a href="https://shell.azure.com/">Azure Cloud Shell</a></p></li>
<li><p>When prompted, login with the Azure subscription you are using for this course.</p></li>
<li><p>If you are prompted about setting up storage for Cloud Shell, accept the defaults.</p></li>
<li><p>Verify that the Cloud Shell is using <strong>Bash</strong>.</p>

<p>The dropdown in the top-left corner of the Azure Cloud Shell page is used to select the environment. Verify that the selected dropdown value is <strong>Bash</strong>.</p></li>
<li><p>At the command prompt, to install the Azure CLI extension for IoT, enter the following command:</p>

<div><pre><code class="language-bash">az extension add --name azure-iot</code></pre></div>

<p><strong>Note</strong>: If the extension is already installed, you can ensure you are running the latest version by entering the following command:</p>

<div><pre><code class="language-bash">az extension update --name azure-iot</code></pre></div></li>
<li><p>At the command prompt, to install the Azure CLI extension for Time Series Insights, enter the following command:</p>

<div><pre><code class="language-bash">az extension add --name timeseriesinsights</code></pre></div></li>
</ol>

<h4 id="toc_20">Task 4: Verify Development Environment Setup</h4>

<p>You should verify that the development environment has been set up successfully.</p>

<ol>
<li><p>Open a new command-line / terminal window.</p></li>
<li><p>Validate the <strong>Azure CLI</strong> installation by running the following command that will output the version information for the currently installed version of the Azure CLI.</p>

<div><pre><code class="language-cmd/sh">az --version</code></pre></div>

<p>The <code>az --version</code> command will output the version information for Azure CLI that you have installed (the <code>azure-cli</code> version number). This command also outputs the version number for all the Azure CLI modules installed, including the IoT extension. You should see output similar to the following:</p>

<div><pre><code class="language-cmd/sh">azure-cli                           2.21.0

core                                2.21.0
telemetry                            1.0.6

Extensions:
azure-iot                          0.10.10
timeseriesinsights                   0.2.1</code></pre></div></li>
<li><p>Validate the <strong>.NET Core 3.x SDK</strong> installation by running the following command that will output the version number for the currently installed version of the .NET Core SDK.</p>

<div><pre><code class="language-cmd/sh">dotnet --version</code></pre></div>

<p>The <code>dotnet --version</code> command will output the version of the .NET Core SDK that is currently installed.</p></li>
<li><p>Verify that .NET Core 3.1 or higher is installed.</p></li>
</ol>

<h3 id="toc_21">Exercise 4: Set Up Course Lab Files and Alternative Tools on the Local PC</h3>

<p>A number of the labs in this course rely on pre-built resources, such as a code project that can be used as a starting point for the lab activity. These lab resources are provided in a GitHub project that you should download to your local PC dev environment.</p>

<p>In addition to the resources that directly support the course labs (the resources contained in the GitHub project), there are some optional tools that you may choose to install because they support learning opportunities outside of this course. One example is PowerShell, which you may see referenced within Microsoft tutorials and other resources.</p>

<p>The instructions below lead you through the configuration of both these resource types.</p>

<h4 id="toc_22">Task 1: Download Course Lab Files to the Local PC</h4>

<p>Microsoft has created a GitHub repo to provide access to lab resource files. Having these files local to the dev environment is required in some cases and convenient in many others. In this task you will be downloading and extracting the contents of the repo within your development environment.</p>

<ol>
<li><p>In your Web browser, navigate to the following location: <a href="https://github.com/MicrosoftLearning/AZ-220-Microsoft-Azure-IoT-Developer">https://github.com/MicrosoftLearning/AZ-220-Microsoft-Azure-IoT-Developer</a></p></li>
<li><p>Open the <strong>Code</strong> dropdown, and then click <strong>Download ZIP</strong>.</p></li>
<li><p>To save the ZIP file to your dev environment, click <strong>Save</strong>.</p></li>
<li><p>Once the file has been saved, click <strong>Open folder</strong>.</p></li>
<li><p>Right-click the saved ZIP file, and then click <strong>Extract all</strong></p></li>
<li><p>Click <strong>Browse</strong>, and then navigate to folder location that is convenient to access.</p>

<blockquote>
<p><strong>Important</strong>: By default, Windows has a <a href="https://docs.microsoft.com/en-us/windows/win32/fileio/naming-a-file#maximum-path-length-limitation">maximum file path length of 260</a>. As the file paths within the ZIP are already long, avoid extracting the archive within nested folders with a large file path. For example, the default path prompted to extract the zip could be similar to <strong>c:\users\[username]\downloads\AZ-220-Microsoft-Azure-IoT-Developer-master</strong> - it is recommended that you shorten this as much as possible, to perhaps <strong>c:\az220</strong></p>
</blockquote></li>
<li><p>To extract the files, click <strong>Extract</strong>.</p>

<p>Be sure to make note of where you located the files.</p></li>
</ol>

<h4 id="toc_23">Task 2: Install Azure PowerShell Module on the Local PC</h4>

<blockquote>
<p><strong>Note</strong>: The lab activities in this course do NOT include using PowerShell, however, you may see sample code in reference documents that use PowerShell. If you want to run PowerShell code, you can use the following instructions to complete the installation steps.</p>
</blockquote>

<p>Azure PowerShell is a set of cmdlets for managing Azure resources directly from the PowerShell command line. Azure PowerShell is designed to make it easy to learn and get started with, but provides powerful features for automation. Written in .NET Standard, Azure PowerShell works with PowerShell 5.1 on Windows, and PowerShell 6.x and higher on all platforms.</p>

<blockquote>
<p><strong>Warning</strong>:  You can&#39;t have both the AzureRM and Az modules installed for PowerShell 5.1 for Windows at the same time. If you need to keep AzureRM available on your system, install the Az module for PowerShell Core 6.x or later. To do this, install PowerShell Core 6.x or later and then follow these instructions in a PowerShell Core terminal.</p>
</blockquote>

<ol>
<li><p>Decide if you wish to install the Azure PowerShell module for just the current user (recommended approach) or for all users.</p></li>
<li><p>Launch the PowerShell terminal of your choice - if you are installing for all users you must launch an elevated PowerShell session either by either selecting <strong>run as administrator</strong> or with the <strong>sudo</strong> command on macOS or Linux.</p></li>
<li><p>To only install for the current user, enter the following command:</p>

<div><pre><code class="language-powershell">Install-Module -Name Az -AllowClobber -Scope CurrentUser</code></pre></div>

<p>or to install for all users on a system, enter the following command:</p>

<div><pre><code class="language-powershell">Install-Module -Name Az -AllowClobber -Scope AllUsers</code></pre></div></li>
<li><p>By default, the PowerShell gallery isn&#39;t configured as a trusted repository for PowerShellGet. The first time you use the PSGallery you see the following prompt:</p>

<div><pre><code class="language-output">Untrusted repository

You are installing the modules from an untrusted repository. If you trust this repository, change
its InstallationPolicy value by running the Set-PSRepository cmdlet.

Are you sure you want to install the modules from &#39;PSGallery&#39;?
[Y] Yes  [A] Yes to All  [N] No  [L] No to All  [S] Suspend  [?] Help (default is &quot;N&quot;):</code></pre></div></li>
<li><p>Answer <strong>Yes</strong> or <strong>Yes to All</strong> to continue with the installation.</p>

<p>The Az module is a rollup module for the Azure PowerShell cmdlets. Installing it downloads all of the available Azure Resource Manager modules, and makes their cmdlets available for use.</p></li>
</ol>

<blockquote>
<p><strong>Note</strong>: If the <strong>Az</strong> module is already installed, you can update to the latest version using:</p>

<div><pre><code class="language-powershell">Update-Module -Name Az</code></pre></div>
</blockquote>

<h3 id="toc_24">Exercise 5 - Register Resource Providers on the Local PC</h3>

<p>Many different types of resources will be created during this course, some of which may not have been registered for use in the current subscription. While some resources are registered automatically during the first use, others must be registered before they can be used, otherwise errors will be reported.</p>

<h4 id="toc_25">Task 1 - Register resource providers using the Azure CLI</h4>

<p>The Azure CLI provides a number of commands to help manage resource providers. In this task, you will ensure that the resource providers required for this course are registered.</p>

<ol>
<li><p>Using a browser, open the <a href="https://shell.azure.com/">Azure Cloud Shell</a> and login with the Azure subscription you are using for this course.</p></li>
<li><p>To view a list of the current state of the resource providers, enter the following command:</p>

<div><pre><code class="language-powershell">az provider list -o table</code></pre></div>

<p>This will display a <em>long</em> list of resources, similar to:</p>

<div><pre><code class="language-powershell">Namespace                                RegistrationPolicy    RegistrationState
---------------------------------------  --------------------  -------------------
Microsoft.OperationalInsights            RegistrationRequired  Registered
microsoft.insights                       RegistrationRequired  NotRegistered
Microsoft.DataLakeStore                  RegistrationRequired  Registered
Microsoft.DataLakeAnalytics              RegistrationRequired  Registered
Microsoft.Web                            RegistrationRequired  Registered
Microsoft.ContainerRegistry              RegistrationRequired  Registered
Microsoft.ResourceHealth                 RegistrationRequired  Registered
Microsoft.BotService                     RegistrationRequired  Registered
Microsoft.Search                         RegistrationRequired  Registered
Microsoft.EventGrid                      RegistrationRequired  Registered
Microsoft.SignalRService                 RegistrationRequired  Registered
Microsoft.VSOnline                       RegistrationRequired  Registered
Microsoft.Sql                            RegistrationRequired  Registered
Microsoft.ContainerService               RegistrationRequired  Registered
Microsoft.ManagedIdentity                RegistrationRequired  Registered
...</code></pre></div></li>
<li><p>To see return a list of the namespaces that contains the string <strong>Event</strong>, run the following command:</p>

<div><pre><code class="language-powershell">az provider list -o table --query &quot;[?contains(namespace, &#39;Event&#39;)]&quot;</code></pre></div>

<p>The results will be similar to:</p>

<div><pre><code class="language-powershell">Namespace            RegistrationState    RegistrationPolicy
-------------------  -------------------  --------------------
Microsoft.EventGrid  NotRegistered        RegistrationRequired
Microsoft.EventHub   Registered           RegistrationRequired</code></pre></div></li>
<li><p>To register the resources required for this course, execute the following commands:</p>

<div><pre><code class="language-powershell">az provider register --namespace &quot;Microsoft.EventGrid&quot; --accept-terms
az provider register --namespace &quot;Microsoft.EventHub&quot; --accept-terms
az provider register --namespace &quot;Microsoft.Insights&quot; --accept-terms
az provider register --namespace &quot;Microsoft.TimeSeriesInsights&quot; --accept-terms</code></pre></div>

<blockquote>
<p><strong>NOTE</strong>: You may see a warning that <strong>-accept-terms</strong> is in preview - you can ignore this.</p>

<p><strong>NOTE</strong>: The <strong>microsoft.insights</strong> is listed in lowercase - however the register/unregister commands are case-insensitive.</p>
</blockquote></li>
<li><p>To view the updated status of the  resources, execute the following commands:</p>

<div><pre><code class="language-powershell">az provider list -o table --query &quot;[?(contains(namespace, &#39;insight&#39;) || contains(namespace, &#39;Event&#39;) || contains(namespace, &#39;TimeSeriesInsights&#39;))]&quot;</code></pre></div>

<blockquote>
<p><strong>NOTE</strong>: Although the register/unregister commands are case-insensitive, the query language is not, so <strong>insight</strong> must be lowercase.</p>
</blockquote>

<p>The resources should now be registered.</p></li>
</ol>

<h4 id="toc_26">Task 2 - Register resource providers using the Azure Portal</h4>

<p>You can see the registration status and register a resource provider namespace through the portal. In this task, you will familiarize yourself with the UI.</p>

<ol>
<li><p>If necessary, log in to <a href="https://portal.azure.com">portal.azure.com</a> using your Azure account credentials.</p></li>
<li><p>From the portal, select <strong>All services</strong>.</p>

<p><img src="media/LAB_AK_03-select-all-services.png" alt="Select all services"></p></li>
<li><p>Select Subscriptions.</p>

<p><img src="media/LAB_AK_03-select-subscriptions.png" alt="Select subscriptions"></p></li>
<li><p>From the list of subscriptions, select the subscription you want to use for registering the resource provider.</p>

<p><img src="media/LAB_AK_03-select-subscription-to-register.png" alt="Select subscription to register resource provider"></p></li>
<li><p>For your subscription, select <strong>Resource providers</strong>.</p>

<p><img src="media/LAB_AK_03-select-resource-provider.png" alt="Select resource providers"></p></li>
<li><p>Look at the list of resource providers, resources can be be registered or unregistered by clicking the appropriate action.</p>

<p><img src="media/LAB_AK_03-list-resource-providers.png" alt="List resource providers"></p></li>
<li><p>To filter the listed resources, in the search textbox, enter <strong>insights</strong>.</p>

<p>Notice that the list is filtered as search criteria is entered. The search is also case-insensitive.</p></li>
</ol>




</body>

</html>
